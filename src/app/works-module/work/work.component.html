<div *ngIf="work$ | async as work; else projectLoading">
  <md-card-header>
    <img md-card-avatar class="size-72"
         alt="work.name"
         [src]="imagesService.getImage('works', work.slug, '-avatar.png')">
    <md-card-title>
      <h3>{{work.name}}</h3>
    </md-card-title>
    <md-card-subtitle>{{ getRemoteTranslation(work.subtitle) }}</md-card-subtitle>
    <span flex></span>
    <div class="pad-top pad-right">
      <a *ngIf="work.url" md-icon-button mdTooltip="web"
         href="{{work.url}}" target="_blank"><md-icon>public</md-icon></a>
      <a *ngIf="work.repo" md-icon-button mdTooltip="Github"
         href="{{work.repo}}" target="_blank" rel="noopener">
        <md-icon svgIcon="github"></md-icon>
      </a>
    </div>
  </md-card-header>
  <img md-card-image alt="{{work.name}}"
       [offset]="offset"
       [defaultImage]="imagesService.getDefaultImage()"
       [lazyLoad]="imagesService.getImage('works', work.slug, '-1.png')"
       [srcset]="imagesService.getImageSet('works', work.slug)"
       sizes="(min-width: 960px) 960px, 100vw">
  <md-card-content>
    <app-tags [workKey]="work.$key"></app-tags>
    <md-divider></md-divider>
    <div [innerHTML]="getRemoteTranslation(work.description)"></div>
    <md-list dense>
      <md-list-item>
        <md-icon md-list-avatar>date_range</md-icon>
        <h4 md-line><span class="text-wrap">{{ 'WORKS.year' | translate }}</span></h4>
        <p md-line>{{work.year}}</p>
      </md-list-item>
      <md-divider></md-divider>
      <md-list-item>
        <md-icon md-list-avatar>person</md-icon>
        <h4 md-line><span class="text-wrap">{{ 'WORKS.client' | translate }}</span></h4>
        <p md-line>{{work.client}}</p>
      </md-list-item>
      <md-divider></md-divider>
      <md-list-item>
        <md-icon md-list-avatar>tag_faces</md-icon>
        <h4 md-line><span class="text-wrap">{{ 'WORKS.partner' | translate }}</span></h4>
        <p md-line>{{work.partner}}</p>
      </md-list-item>
      <md-divider></md-divider>
      <md-list-item>
        <md-icon md-list-avatar>settings</md-icon>
        <h4 md-line><span class="text-wrap">{{ 'WORKS.techs' | translate }}</span></h4>
        <p md-line>{{work.tools}}</p>
      </md-list-item>
    </md-list>
  </md-card-content>
</div>

<ng-template #projectLoading>
  <md-card-header>
    <md-card-title>
      <h3>{{ slug }}</h3>
    </md-card-title>
  </md-card-header>
  <md-card-content>
    <app-activity-indicator
      [color]="activityColor">
    </app-activity-indicator>
  </md-card-content>
</ng-template>
